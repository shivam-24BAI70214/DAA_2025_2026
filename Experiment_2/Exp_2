#include<iostream>
#include<algorithm>
#include<vector>
#include<queue>
using namespace std;
struct Node{
    char ch;
    int freq;
    Node *left,*right;
};
Node* newNode(char ch,int freq) {
    Node* node=new Node();
    node->ch=ch;
    node->freq=freq;
    node->left=node->right=NULL;
    return node;
}
struct Compare{
    bool operator()(Node* l,Node* r){
     return l->freq>r->freq;
    }
};
void Codes(Node* root, string code, unordered_map<char,string>& codes) {
    if(!root){
    return;
    }
    if(root->left==NULL && root->right==NULL)
        codes[root->ch]=code;
    Codes(root->left,code+"0",codes);
    Codes(root->right,code+"1",codes);
}
string decode(Node* root,string encoded) {
    string result = "";
    Node* curr=root;
    for(char bit:encoded) {
        if(bit==0){
            curr=curr->left;
        }
        else{
            curr=curr->right;
        }
        if(curr->left==NULL && curr->right==NULL){
            result+=curr->ch;
            curr=root;
        }
    }
    return result;
}
int main (){
    string text;
    cout<<"Enter The String Here:";
    getline(cin,text);
    unordered_map<char,int>freq;
    for (char c:text){
        freq[c]++;
    }
    priority_queue<Node*,vector<Node*>,Compare>pq;
    for(auto p:freq){
        pq.push(newNode(p.first,p.second));
    }
    Node* root=pq.top();
    unordered_map<char,string> codes;
    Codes(root, "", codes);
    string encoded;
    for (char c:text){
        encoded+=codes[c];
    }
    cout<<"Huffman Codes:";
    for(auto p:codes)
        cout<<p.first<<":"<<p.second<<endl;
    cout<<"Encoded string:"<<encoded<<endl;
    cout<<"Decoded string:"<<decode(root,encoded)<>endl;
    return 0;
}
